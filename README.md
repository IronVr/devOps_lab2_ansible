# devOps_lab2_ansible

## Подготовка среды и сетевая настройка

1.  **Очистка предыдущих задач:**
    * Отключите скрипт `weather.sh` из предыдущей работы в планировщике задач: `crontab -e`.
2.  **Создание второй виртуальной машины:**
    * Клонируйте основную ВМ, обязательно выбрав опцию **«Сгенерировать новые MAC-адреса для всех сетевых адаптеров»**.
3.  **Настройка сети в VirtualBox:**
    * Перейдите в *Инструменты* -> *Сеть* -> *Сети NAT*.
    * Создайте новую сеть NAT с адресацией `10.0.2.0/24`.
    * Переключите обе ВМ на работу в этой сети.
4.  **Конфигурация IP и портов:**
    * При необходимости настройте статические IP-адреса внутри ОС на обеих машинах.
    * Настройте проброс портов:
        * Порт **22** для доступа по SSH на обе ВМ.
        * Порт **80** на вторую ВМ для доступа к веб-серверу.

---

## Настройка доступа и пользователя

1.  **Подготовка целевой машины:**
    * Создайте пользователя `runner`.
    * Предоставьте пользователю `runner` права `sudo` без необходимости ввода пароля.
2.  **Настройка SSH-доступа:**
    * Сгенерируйте SSH-ключ на первой ВМ (если он не был создан ранее).
    * Скопируйте публичный ключ на вторую ВМ для пользователя `runner` (`ssh-copy-id`).

---

## Автоматизация с Ansible

Все действия выполняются на **первой** виртуальной машине:

1.  **Установка:**
    * Установите пакет `ansible`.
2.  **Подготовка конфигурации:**
    * Создайте файл `inventory.ini`, указав в нем IP-адрес второй ВМ.
    * Подготовьте шаблон страницы `index.html`.
3.  **Разработка Playbook:**
    * Напишите сценарий `playbook.yaml` для установки и запуска **Nginx** на целевой машине.
    * Настройте копирование вашего шаблона `index.html` в директорию веб-сервера.
4.  **Запуск:**
    * Выполните плейбук и проверьте корректность работы веб-страницы.

**Пример тестовой страницы:**

![Первое изображение]<img width="1360" height="726" alt="image" src="https://github.com/user-attachments/assets/00e73ad5-8f27-44ea-b463-3ab5bf1a7e13"/>
